<div class="row justify-content-center">
  <div class="col col-md-10 col-lg-8 col-xl-6 col-xxl-5">
    <div class="card">
      <div class="card-body">
        <app-alert/>

        <h2 class="card-title d-flex justify-content-center">Gestione anagrafica</h2>
        <hr/>
        <div class="d-flex align-items-center justify-content-center mb-2">
          <img class="img-fluid col-4 col-sm-3 col-md-2"
               [src]="APP_CONSTANTS.ENDPOINT_AVATAR + userData?.id"
               alt="user-avatar"/>
        </div>

        <div class="table-responsive">
          <table class="table align-middle">
            <tbody>
            <tr>
              <th scope="row">ID</th>
              <td><code>{{ userData?.id }}</code></td>
              <td></td>
            </tr>

            <tr app-profile-field fieldLabel="Nome" [fieldValue]="userData?.firstName" httpFieldName="firstName"
                inputType="text" (editResult)="handleEditResult($event)"
                [additionalValidators]="[noNumbersValidator()]">
            </tr>

            <tr app-profile-field fieldLabel="Cognome" [fieldValue]="userData?.lastName" httpFieldName="lastName"
                inputType="text" (editResult)="handleEditResult($event)"
                [additionalValidators]="[noNumbersValidator()]"></tr>

            <tr app-profile-field fieldLabel="Data di nascita" [fieldValue]="userData?.birthDate"
                [fieldValueVisualizer]="userData?.birthDate | date: 'dd/MM/YYYY'"
                httpFieldName="birthDate" inputType="date" (editResult)="handleEditResult($event)"></tr>

            <tr app-profile-field fieldLabel="Email" [fieldValue]="userData?.email" httpFieldName="email"
                inputType="email" (editResult)="handleEditResult($event)"
                [additionalValidators]="[emailValidator()]"></tr>

            <tr app-profile-field fieldLabel="Password"
                fieldValueVisualizer="&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;"
                httpFieldName="encryptedPassword" inputType="password"
                (editResult)="handleEditResult($event)"
                [additionalValidators]="[Validators.minLength(APP_CONSTANTS.PASSWORD_MIN_LENGHT)]"
                [fieldTransformation]="AuthorizationUtils.hashPassword"></tr>

            <tr>
              <th scope="row">Ultima modifica</th>
              <td><code>{{ userData?.lastEdit | date: 'dd MMMM HH:mm' }}</code></td>
              <td></td>
            </tr>

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
